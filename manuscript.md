## 円滑なUI＆機能実装やデザイナーとの共同作業を進めるために心がけてきた事

### はじめに

皆様こんにちは、酒井文也 (@fumiyasac)と申します。

本稿では、チームの皆様（プロダクトマネージャー/デザイナー/エンジニア）を巻き込みながら、アプリUI実装と機能ロジックをコラボして仕上げていく際に、私自身が心がけている習慣やポイント、そして着眼点等をご紹介できればと考えております。対象の読者としては、 **「UI実装時に発生する調整やすり合わせに苦手意識や課題を感じている方」** や **「デザイナーをはじめチーム内でのコニュニケーションや協業をより上手に進めたいと考えている方」** を想定しています。決して特別な事はありませんが、ほんの少しでも皆様のご参考になる事ができれば嬉しく思います。

### 1. 仕様策定時からUI実装前で心掛けていること

この時点で大切なのは **「デザイナーが描く世界をエンジニアが開発できる状態にするためのベースとなる部分を明らかにする」** 事だと私は考えております。特に口頭での説明だけでは伝わりにくい技術的な事項や、実現可能ではあるけれども当初の想定以上に開発工数を要する事が見込まれる懸念等、理想と現実とのギャップが生まれる可能性がある部分を事前に明確化しておき、ドキュメント等のまとまった形でアウトプットを共有することで、ベースとなる部分の解像度を上げることができ、デザイナーとエンジニア間でのコニュニケーションを円滑に進めることにも繋がっていくと思います。

#### 1-1. 仕様のイメージをすり合わせるために書き出してみよう

私自身がまず心がけている習慣として、新機能の実装時や既存機能の改修対応をする際において特にデザイン要素の調整や変更を伴う開発をする際の設計及び仕様相談ミーティングの場合や平素のスクラムイベントの中でアプリの仕様策定に関わりうるものについては、議事録とは別に自分なりにミーティングの要点やポイントを簡単にまとめたメモを自分で取る様に心がけています。この様な活動は、自分自身がデザインデータ・仕様書・その他資料等を読み合わせた際に出てきたポイントや疑問点、そして会話の中でのポイントになりうる点をキャッチアップできているかの確認の意味合いももちろんありますが、議事録だけでは掴みにくい会話を元にした議論の流れをできるだけ言語化しておく様な状態にすることで後から理解できる様にしておけばチームメンバーの役に立てると思い今日まで継続しているものです。

**【ノート整理する上で特に私が意識しているポイント】**

1. デザインデータ・仕様書・その他資料等を読み合わせた際に出てきた疑問点は何か？
2. 機能ロジックとUI実装をしていく際に自分が怖そうと感じる部分があるか？
3. デザインデータの内容を見た際に自分の中で画面遷移図が描けるか？
4. メンバーとの会話の中で盛り上がった(関心が向いている部分)はどこか？
5. 議論が脱線してしまったり決めたい部分が未決定のままになっていないか？

![my_memo_note01.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/my_memo_note01.png)

![my_memo_note02.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/my_memo_note02.png)

個人的な所感としましては、チームメンバーと一緒に開発を進めていく中でペア作業を実施する場面やiOSとAndroid両方のアプリに対して改修を実施する場合でも役に立つことが多くありました。実装段階でOS間でのUI構造の違いや共通点にも気がつく事ができることでエンジニア側からも提案を投げかける等の歩み寄りをする機会も増えたのではないかと感じています。

#### 1-2. デザインデータを細かく精査して実装時の勘所を紐解いてみよう

iOSアプリ開発におけるUI実装を形にする工程においてファースト・コンタクトとなる部分はFigmaやAdobeXD等をはじめとしたツールで作成されたデザインになるかと思います。昨今のデザインツールでは、デザイナーとエンジニア間での活発なコミュニケーションを促すための機能をすでに備えているので、配置要素に関する情報や画面遷移フロー図解と共に、

- デザインを見た際に気をつけられそうな部分
- さらにもう一段「深く読んでみて」気をつけられそうな部分
- 想定する機能を利用した場合の初めから終わりまでの流れや一連のストーリーとの整合性

等の観点に目を向けることはもちろんですが、これに加えてデザインの中では表現することが難しいアニメーションやインタラクションに関する部分の感覚をすり合わる必要がある場合もあります。この様な時には動作感を含めて試す事ができる試作品を元にフィードバックを反映する過程を繰り返す形で調整をかけていく様にすると、認識をそろえやすくできるのではないかと思います。

![design_himotoki01.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/design_himotoki01.png)

![design_himotoki02.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/design_himotoki02.png)

![design_himotoki03.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/design_himotoki03.png)

UI実装・画面遷移・アニメーション・操作時の手触り感に関するチェックに関してはデザイナーとの協力が不可欠な部分でもあると私自身も感じており、特にデザインと実装とのつなぎ目になりうる部分についてはコミュニケーション面でも連携が必要になる部分と考えております。

デザインに対するエンジニア観点からのフィードバックをする際においても少しでも「お互いが優しい気持ちになれる」状態を作り出すための準備や配慮についても自分なりにはなってしまいますが、可能な限りこだわる様に注意しています。

### 2. UI実装を検討していく段階で心掛けていること

この時点で大切なのは **「デザインの中では検知できない実装コストを見極めて、早めの段階で対策や方針を明らかにする」** 事だと私は考えております。一見するとシンプルに感じるデザインや他のアプリで頻繁に見る表現であっても、いざ実装に着手した際に、

- 強引な形で実現ができたが想像以上に工数が必要だった。
- デザインと内部機能と組み合わせた際に違和感を感じる形になってしまった。
- 当初想定していたデザインでは実現できなかったために手戻りが発生した。

という事はしばしばあるかと思います。その様な事態になる事をできる限り減らし、万が一その様な事態になった場合でも代替案や回避策を素早く検討できる様に、エンジニアからデザイナーへ実装観点からのポジティブなフィードバックや働きかけができる準備をしておく事が大切だと思います。

#### 2-1. 自前での準備が難しそうな部分に対してライブラリの利用を検討する

ここでは難易度を見誤りやすい例として **「Webでは頻出の表現に対してライブラリの利用を検討する」** 場合について考えてみようと思います。Webでは頻出の表現をその感覚のままアプリ側に適用しようとすると難易度や実現可能性を見誤り痛い目を見ることもあるかと思います。その様な事態を避ける為の候補となり得るライブラリの事例とポイントを簡単にご紹介します。

##### ⭐️ 事例1. 長文の中にメンション・ハッシュタグ・URLリンクが混在する様な形を実現する場合

- ActiveLabel.swift
  https://github.com/optonaut/ActiveLabel.swift

![libraries_example01.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/libraries_example01.png)

##### ⭐️ 事例2. 星形レーティングを表示を実現する場合

- Cosmos
  https://github.com/evgenyneu/Cosmos

![libraries_example02.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/libraries_example02.png)

##### ⭐️ 事例3. Markdown形式のテキスト表示を利用する場合

- SwiftyMarkdown
  https://github.com/SimonFairbairn/SwiftyMarkdown

読み物系コンテンツ等で長めの文章表示をする場合において、Markdown形式のテキストを表示をある程度のスタイルを考慮した状態でiOSアプリ上で表示する場合には、「SwiftyMarkdown」の利用を検討しても良さそうに思います。

余談として、執筆時点ではまだβ版ではありますが、iOS15からはAttributedTextの設定においてMarkdownがサポートされる様になるので、更にテキスト表現の幅がこれからも広がっていく期待も個人的には感じています。

https://developer.apple.com/documentation/foundation/attributedstring/3796160-init

##### ⭐️ 事例4. 注釈等の用途で利用するTooltipを実現する場合 

- EasyTipView
  https://github.com/teodorpatras/EasyTipView

Webサイトで補足や注釈説明を特定のエリアに表示する際に利用されるTooltipの様な表示をiOSアプリで実現する場合には、「EasyTipView」の利用を検討しても良さそうに思います。

ただし、UITableView / UICollectionViewを利用して表示する様な場合においては、

- スクロールを実行するとセルのリサイクルが発生してしまう点
- 対象セルに対しての細かな表示位置調整をするための実装が必要になる点

に注意しながら実装や検討を進める必要があると個人的に感じております。

この様にWebでもよく用いられるUI表現を参考にする場合においては、スマートフォン対応のWebサイトにおけるUI実装とネイティブアプリでのUI実装を比べた上で、この表現はアプリでもよく用いられる形のものか？という点に気をつけながら判断していく事がポイントになると思いますので、自前での実装手段を考えていくと同時にUI実装用のライブラリを活用するといった選択肢を視野に入れた上で検討していくと良さそうに思います。

#### 2-2. Androidアプリで良くお目にかかるUI表現をiOSアプリで実現する場合の勘所

ここからは少し趣向を変えて、iOS/AndroidアプリにおけるUIのテイストをある程度合わせていく方針をとる場合についても触れたいと思います。

- iOS: Human Interface Guideline
- Android: Material Design

とそれぞれ異なったデザインに関するガイドラインが定められており、類似した表現をiOS/Android両方で実現したい場合であっても、お互いのガイドラインと照らし合わせながら不自然にならないように配慮しなければならない点には十分に注意する必要があります。

前述した前提を踏まえながら、UI表現を考えていく際には近しい機能を持つiOS/Androidアプリの両方を参考とする場合が多いと思いますし、場合によってはAndroidアプリでよく用いられるUI表現からヒントを得てiOS側のUIに取り入れて考えていく様な場合もあると思います。この様な場合には、類似した印象を持つ機能やデザインであったとしても実現方法やUI実装における考え方は全く異なる場合がある点を念頭に置きながら、改めて一歩踏み込んだ上で細かな点を注意深く見る様にすると、実装段階における両方のOS間の違いと配慮すべき点を明らかにして実装を進めていけるのではないかと思います。

また、FlutterやReactNativeといったクロスプラットフォームを利用したアプリ開発におけるUI実装を考えていく場合においても同様に、iOS/Android間におけるUI表現に関する違いや考え方の違いと共に「ネイティブアプリらしさの実現におけるポイント」について理解をしておくことは、ネイティブアプリでの開発時と同様にとても有意義であると感じています。1つのコードベースの中でiOS/Android両方のガイドラインにできるだけ合わせながら両方のOSに対応する形でのデザインを考えていかなければならない点にその難しさがありますが、アプリの使い勝手や馴染むデザインを考えていく際には意識をしておいて決して損はないと思います。Flutterでは「Cupertino UI」が純正Widgetとして提供されていたり、ReactNativeにおいても「NativeBase」の様なライブラリがあるので、iOS/Android間におけるデザインを意識したUI実装を考える際には参考にしてみても良いかもしれません。

- NativeBase (※NativeBase)
  https://nativebase.io/
- Cupertino Widgets (※Flutter)
  https://flutter.dev/docs/development/ui/widgets/cupertino

そして、ここからは **「AndroidではComponent内の機能として提供されている振る舞いやよく見る画面構造に類似した形を実現する」** 場合において、実現をするためのヒントとなるUI構造を考えていく際のポイントと実現するための候補になり得るライブラリの事例を簡単にご紹介します。

##### ⭐️ 事例1. 配置したヘッダー画像がスクロールに合わせて伸縮する様なレイアウト例 

![android_resemble01.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/android_resemble01.png)

Androidで類似した表現を実現する場合には「CoodiatorLayout」を利用することで関連する各種View要素の大きさや位置の調整をする様な形になりますが、iOSではこの部分をUIScrollViewDelegateを利用してスクロールの変化量をキャッチして関連する各種View要素に変化を与える形の実装となる点が大きく異なる部分かと思います。また、サムネイル画像部分におけるパララックス（視差効果）表現部分についてはライブラリを利用したり、またはその挙動や振る舞い等を参考にしながら実装を考えていく形にしても良いかもしれません。

- ParallaxHeader
  https://github.com/romansorochak/ParallaxHeader

##### ⭐️ 事例2. タブ型の一覧表示＆スワイプをして画面を切り替える様なレイアウト例

![android_resemble02.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/android_resemble02.png)

Androidで類似した表現を実現する場合には「ViewPagerとTabLayoutの組み合わせ」を利用することで図解に示した様な形を実現することができますが、iOSではUIPageViewControllerでのコンテンツ一覧表示をベースとした上で、タブ表示部分についてはUIScrollViewやUICollectionViewを利用する方針となる場合が多いかと思います。そしてタブ表示部分のデザイン的な見せ方の部分等でも工夫の余地がある一方で、自前で細かな部分までこだわったUI実装をする場合にはなかなか骨の折れる部分でもあります。現在では割とポピュラーなUI表現にもなってきていることもあり、この様な形を実現する有名なライブラリもあるので、自前での実装が難しい場合はライブラリに合わせた方針を取ることを検討をしてみるのも良さそうです。

- Parchment
  https://github.com/rechsteiner/Parchment

前述した画面レイアウトに関する例とは少し異なりますが、Androidアプリ内で良く見かけるUIコンポーネントでBottomSheetとFloatingActionButtonを例に、もしiOSで同様な表現を実装しようと考えた場合に、題意を満たす様な表現をUIライブラリを利用した実装例も簡単に紹介できればと思います。

##### ⭐️ 事例3. AndroidでのFloating Action Buttonに相当する様な実装例

![android_library01.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/android_library01.png)

- Floaty
  https://github.com/kciter/Floaty

##### ⭐️ 事例4. AndroidでのBottom Sheetに相当する様な実装例

![android_library02.png](https://github.com/fumiyasac/iosdc2021_pamphlet_manuscript/blob/main/images/android_library02.png)

- PanModal
  https://github.com/slackhq/PanModal

私の場合は、AndroidアプリこうするけれどもiOSアプリではではどうする？(またはその逆も然り)という視点で実装のイメージやアイデアを紐解くために、

- iOS/Androidアプリで頻出のUI表現に関する調査
- よく利用されるライブラリと活用事例

という観点を特に注意しながら、UI実装時のヒントを探る様にしています。

Androidでは良く見かける表現やAndroid特有の特徴的なComponentを利用している部分は、技術的には実現可能であったとしても片方のOSではあまりお目にかからないUI表現であるケースもあるので、両OSでのガイドラインを見比べると共に参考にするアプリにおいてもiOS/Android版を見比べながら調査をする様な形にすると、より良い判断や選択ができると思います。

### 3. 機能ロジックとUI実装を合わせる際に違和感を感じた場合の働きかけ

ここまでで紹介した事例以外にも、UI実装と機能ロジックを合わせていく際に実装を組み立てていく途中段階において違和感を覚えてしまう場面に遭遇する事はしばしば経験すると思いますし、私自身も例に違わずこの様な経験して焦ってしまう事がよくあります。その様な時には、ある程度組み立てた時点で感じた懸案事項や不安要素等を可能な限り言語化し、説明と共有ができる形を常に作っておく様にすることで、これまでのデザインや機能に対して軌道修正をせざるを得ない場合でも立て直しのための議論をスムーズにすることができるかと思います。

### おわりに

本稿でここまでにご説明してきた部分はコードでの実装そのものというよりも、前準備の段階における自分なりのアプローチ手段になるかと思います。特にプロダクトマネージャー/デザイナー/エンジニア/QA等の様々な役割を持ったメンバーが1つのチームとなって関わり合う様な形をとっている場合には、アプリUI実装と機能ロジックを一緒に考えていく必要があると共に、技術的に実現が難しそうな部分やデザインの状態を完璧に再現しようとした際に複雑な実装を伴う可能性がある部分を、時間の制約がある中でもきるだけ早い段階で明らかにしなければいけない様な場面はたくさんあるかと思います。

その様な状況でもチームとしてできるだけ素早く正解を見出していくためには、「目に見えない部分に対する前段階の準備力」がポイントとなっていくのではないかと私は考えております（昨今のコロナ禍の中ではリモートワークが主体になっている状況もあり、私自身も改めてその大切さを痛感している次第です）。

アプリUI実装と機能ロジックをコラボしていく過程の中で、UI実装に関する部分は1つの決まった答えがあるわけでもなく、正解を見出すまでの試行錯誤の過程はシビアで泥臭く突き詰めていかなければならない場面も多々あると思います。実現するためのアイデアや方針を立てていく際に、デザインデータや仕様書といった情報を紐解く過程の中で生まれた些細な疑問点や自分であればこの様な実装を考えていくという小さなアイデアといった点を、できるだけ自分の言葉で言語化したものを簡単でも構わないのでまとめたものを細かく共有する様に心がけていくと良さそうに感じています。

そして私自身、UI実装のアイデアを考える際における最初の1歩が「自分が気になったUI実装やあのアプリでの表現」という小さなキッカケであることが多く、その感覚や認識を頭の片隅におきながら具体的な実装を紐解くためのアプローチや設計方針・コードとしての実現方法を覗きながらその機能やUIとしての美しさの琴線に触れながら、アプリUI実装と機能ロジックの調和が取れたユーザーの心に残る形を実現していくことが、iOSアプリ開発におけるUI実装の醍醐味の1つであると考えております。

本稿に執筆に当たり現在私が業務委託としてiOS/Androidアプリ開発に携わらせて頂いております株式会社グロービス様での業務内での事例を今回は紹介をしております。この場をお借りして感謝を意を述べさせて頂きます。アプリの機能やデザインを考えて行く際において、チームの皆様を巻き込みながら、数多くの議論やご相談の機会をしっかりと設けて頂きながら磨き上げていくプロセスは本当に私自身も発見が多く勉強になっております。そして最後までお読み頂きまして本当にありがとうございました。
